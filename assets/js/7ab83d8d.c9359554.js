"use strict";(self.webpackChunkwechat_assistant_pro_docs=self.webpackChunkwechat_assistant_pro_docs||[]).push([[8724],{6154:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var t=s(4848),r=s(8453);const i={sidebar_position:3},o="\u667a\u80fd\u5bf9\u8bdd",a={id:"features/chatbot",title:"\u667a\u80fd\u5bf9\u8bdd",description:"\u667a\u80fd\u5bf9\u8bdd\u529f\u80fd\u53ef\u4ee5\u5e2e\u52a9\u60a8\u5feb\u901f\u63a5\u5165\u804a\u5929\u673a\u5668\u4eba\uff0c\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002",source:"@site/docs/features/chatbot.md",sourceDirName:"features",slug:"/features/chatbot",permalink:"/docs/features/chatbot",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u7fa4\u7ba1\u7406",permalink:"/docs/features/room"},next:{title:"\u7fa4\u53d1\u52a9\u624b",permalink:"/docs/features/message_broadcast"}},c={},d=[{value:"\u673a\u5668\u4eba\u7ba1\u7406",id:"\u673a\u5668\u4eba\u7ba1\u7406",level:2},{value:"\u5217\u8868\u9875",id:"\u5217\u8868\u9875",level:3},{value:"\u53c2\u6570\u914d\u7f6e",id:"\u53c2\u6570\u914d\u7f6e",level:3},{value:"Prompt \u7ba1\u7406",id:"prompt-\u7ba1\u7406",level:2},{value:"\u5217\u8868\u9875",id:"\u5217\u8868\u9875-1",level:3},{value:"\u53c2\u6570\u914d\u7f6e",id:"\u53c2\u6570\u914d\u7f6e-1",level:3},{value:"\u81ea\u5b9a\u4e49\u5bf9\u8bdd\u6a21\u578b",id:"\u81ea\u5b9a\u4e49\u5bf9\u8bdd\u6a21\u578b",level:2},{value:"\u56de\u8c03\u5730\u5740\u914d\u7f6e",id:"\u56de\u8c03\u5730\u5740\u914d\u7f6e",level:3},{value:"\u6d88\u606f\u7c7b\u578b\u8bf4\u660e",id:"\u6d88\u606f\u7c7b\u578b\u8bf4\u660e",level:3},{value:"\u793a\u4f8b\u4ee3\u7801",id:"\u793a\u4f8b\u4ee3\u7801",level:3},{value:"\u804a\u5929\u8bb0\u5f55",id:"\u804a\u5929\u8bb0\u5f55",level:2},{value:"\u5217\u8868\u9875",id:"\u5217\u8868\u9875-2",level:3},{value:"\u804a\u5929\u8be6\u60c5",id:"\u804a\u5929\u8be6\u60c5",level:3}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u667a\u80fd\u5bf9\u8bdd",children:"\u667a\u80fd\u5bf9\u8bdd"})}),"\n",(0,t.jsx)(n.p,{children:"\u667a\u80fd\u5bf9\u8bdd\u529f\u80fd\u53ef\u4ee5\u5e2e\u52a9\u60a8\u5feb\u901f\u63a5\u5165\u804a\u5929\u673a\u5668\u4eba\uff0c\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u673a\u5668\u4eba\u7ba1\u7406",children:"\u673a\u5668\u4eba\u7ba1\u7406"}),"\n",(0,t.jsx)(n.h3,{id:"\u5217\u8868\u9875",children:"\u5217\u8868\u9875"}),"\n",(0,t.jsx)(n.p,{children:"\u673a\u5668\u4eba\u5217\u8868\uff0c\u663e\u793a\u5df2\u914d\u7f6e\u7684\u673a\u5668\u4eba\u4ee5\u53ca\u57fa\u672c\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)("img",{src:"/img/software_chatbot_01_mosaic.png",width:"500"}),"\n",(0,t.jsx)(n.h3,{id:"\u53c2\u6570\u914d\u7f6e",children:"\u53c2\u6570\u914d\u7f6e"}),"\n",(0,t.jsx)(n.p,{children:"\u652f\u6301\u9009\u62e9 FastGPT\u3001Dify\u3001Coze\u3001OpenAI \u7b49\u5e73\u53f0\uff0c\u914d\u7f6e\u76f8\u5173\u53c2\u6570\u540e\u5373\u53ef\u4f7f\u7528\u5bf9\u5e94\u7684\u673a\u5668\u4eba\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u4ee5\u6309\u8054\u7cfb\u4eba\u3001\u6807\u7b7e\u548c\u7fa4\u7ec4\u8bbe\u7f6e\u4e0d\u540c\u7684\u673a\u5668\u4eba\uff0c\u5b9e\u73b0\u5343\u4eba\u5343\u9762\u7684\u4e2a\u6027\u5316\u670d\u52a1\uff0c\u6ee1\u8db3\u591a\u79cd\u573a\u666f\u9700\u6c42\u3002"}),"\n",(0,t.jsx)("img",{src:"/img/software_chatbot_02_mosaic.png",width:"500"}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("img",{src:"/img/software_chatbot_03_mosaic.png",width:"500"}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("img",{src:"/img/software_chatbot_05_mosaic.png",width:"500"}),"\n",(0,t.jsx)(n.h2,{id:"prompt-\u7ba1\u7406",children:"Prompt \u7ba1\u7406"}),"\n",(0,t.jsx)(n.h3,{id:"\u5217\u8868\u9875-1",children:"\u5217\u8868\u9875"}),"\n",(0,t.jsx)(n.p,{children:"Prompt \u5217\u8868\uff0c\u663e\u793a\u5df2\u914d\u7f6e\u7684 Prompt\uff0c\u5305\u62ec\u7cfb\u7edf\u5185\u7f6e\u7684 Prompt \u53ca\u81ea\u5b9a\u4e49\u7684 Prompt\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u7cfb\u7edf\u5185\u7f6e\u7684 Prompt \u65e0\u6cd5\u4fee\u6539\u3001\u5220\u9664\uff0c\u53ea\u80fd\u67e5\u770b\u3002"})}),"\n",(0,t.jsx)("img",{src:"/img/software_chatbot_06_mosaic.png",width:"500"}),"\n",(0,t.jsx)(n.h3,{id:"\u53c2\u6570\u914d\u7f6e-1",children:"\u53c2\u6570\u914d\u7f6e"}),"\n",(0,t.jsx)("img",{src:"/img/software_chatbot_07_mosaic.png",width:"500"}),"\n",(0,t.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u5bf9\u8bdd\u6a21\u578b",children:"\u81ea\u5b9a\u4e49\u5bf9\u8bdd\u6a21\u578b"}),"\n",(0,t.jsx)(n.p,{children:"\u652f\u6301\u901a\u8fc7\u56de\u8c03\u5730\u5740\u65b9\u5f0f\u63a5\u5165\u81ea\u5b9a\u4e49\u5bf9\u8bdd\u6a21\u578b\uff0c\u7075\u6d3b\u5e94\u5bf9\u591a\u6837\u5316\u7684\u4e1a\u52a1\u9700\u6c42\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u56de\u8c03\u5730\u5740\u914d\u7f6e",children:"\u56de\u8c03\u5730\u5740\u914d\u7f6e"}),"\n",(0,t.jsx)(n.p,{children:"\u56de\u8c03\u5730\u5740\uff1a[Your API Host]/chat/completions"}),"\n",(0,t.jsx)(n.p,{children:"\u8bf7\u6c42\u65b9\u6cd5\uff1aPOST"}),"\n",(0,t.jsx)(n.p,{children:"\u8bf7\u6c42\u5934\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Content-Type: application/json\nAuthorization: Bearer [Your API Key]\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8bf7\u6c42\u53c2\u6570\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"type MessagePayload = {\n  type: MessageType;\n  id: string;\n\n  filename?: string;\n  text?: string;\n\n  talkerId: string;\n  listenerId?: string;\n\n  roomId: string;\n  mentionIdList?: string[]; // Mentioned Contacts' Ids\n\n  timestamp: number;\n};\n\ninterface ChatProps extends BaseChatProps {\n  chatId?: string;\n  userId: string;\n  stream?: string;\n  variables?: Record<string, string>;\n  question: string;\n  payload?: MessagePayload;\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u6ce8\u610f\uff1a",(0,t.jsx)(n.code,{children:"MessagePayload"})," \u4e3a wechaty \u6807\u51c6\u6d88\u606f\u7c7b\u578b\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u54cd\u5e94\u53c2\u6570\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface ChatResponse {\n  success: boolean;\n  message: string;\n  data: {\n    chatId: string;\n    messageId: string;\n    content: string;\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u6d88\u606f\u7c7b\u578b\u8bf4\u660e",children:"\u6d88\u606f\u7c7b\u578b\u8bf4\u660e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"enum MessageType {\n  Unknown = 0,\n\n  Attachment = 1, // Attach(6),\n  Audio = 2, // Audio(1), Voice(34)\n  Contact = 3, // ShareCard(42)\n  ChatHistory = 4, // ChatHistory(19)\n  Emoticon = 5, // Sticker: Emoticon(15), Emoticon(47)\n  Image = 6, // Img(2), Image(3)\n  Text = 7, // Text(1)\n  Location = 8, // Location(48)\n  MiniProgram = 9, // MiniProgram(33)\n  GroupNote = 10, // GroupNote(53)\n  Transfer = 11, // Transfers(2000)\n  RedEnvelope = 12, // RedEnvelopes(2001)\n  Recalled = 13, // Recalled(10002)\n  Url = 14, // Url(5)\n  Video = 15, // Video(4), Video(43)\n  Post = 16, // Moment, Channel, Tweet, etc\n\n  System = 18 // System Message\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b\u4ee3\u7801",children:"\u793a\u4f8b\u4ee3\u7801"}),"\n",(0,t.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\u4ee3\u7801\uff0c\u4f7f\u7528 Express \u6846\u67b6\u5b9e\u73b0\u56de\u8c03\u5730\u5740\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import express from 'express';\n\nconst app = express();\n\napp.use(express.json());\n\napp.get('/', (req, res) => {\n  res.send('Hello World!');\n});\n\n\napp.post('/chat/completions', (req, res) => {\n  console.log(req.body);\n\n  setTimeout(() => {\n    res.json({\n      success: false,\n      message: 'ok',\n      data: {\n        chatId: 'chat-id-123',\n        messageId: 'message-id-456',\n        content: '\u4f60\u597d\uff0c\u6211\u662f wxbot \u673a\u5668\u4eba\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\u3002'\n      }\n    })\n  }, 5 * 1000)\n})\n\napp.listen(4000, () => {\n  console.log('Example app listening on port 4000!');\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u804a\u5929\u8bb0\u5f55",children:"\u804a\u5929\u8bb0\u5f55"}),"\n",(0,t.jsx)(n.h3,{id:"\u5217\u8868\u9875-2",children:"\u5217\u8868\u9875"}),"\n",(0,t.jsx)(n.p,{children:"\u804a\u5929\u8bb0\u5f55\u5217\u8868\uff0c\u663e\u793a\u6d88\u606f\u5217\u8868\uff0c\u652f\u6301\u6309\u65f6\u95f4\u6bb5\u3001\u673a\u5668\u4eba\u3001\u7528\u6237\u7c7b\u578b\u7b5b\u9009\uff0c\u652f\u6301\u5bfc\u51fa\u5bf9\u8bdd\u8bb0\u5f55\u3002"}),"\n",(0,t.jsx)("img",{src:"/img/software_chat_history_01_mosaic.png",width:"500"}),"\n",(0,t.jsx)(n.h3,{id:"\u804a\u5929\u8be6\u60c5",children:"\u804a\u5929\u8be6\u60c5"}),"\n",(0,t.jsx)(n.p,{children:"\u804a\u5929\u8be6\u60c5\u9875\uff0c\u663e\u793a\u5355\u6761\u804a\u5929\u8bb0\u5f55\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)("img",{src:"/img/software_chat_history_02_mosaic.png",width:"500"})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);